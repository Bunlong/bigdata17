# Basic tools {#basics}

In this Chapter, we present basic tools that will be important when interacting with big data systems, most importantly the command-line interface (CLI) in a Unix shell and several utilities (`less`, `awk`, `vi` and `make`).

## Command line tools

We assume some familiarity with the Unix shell, for example as in http://swcarpentry.github.io/shell-novice/.

We also assume that you have access to a shell, either because you use Linux or OS X or because you have the right tools on Windows (for example [Cygwin](https://www.cygwin.com/) or the Bash shell in Windows 10).

### Why use the command line?

- Batch processing

- Cluster and cloud computing

### Basic Unix commands

### Useful tools

#### `less`

#### `awk`

#### `vi`

### Example

Let's apply some of the techniques described in @Blackwell2012 on Fisher's Iris data set saved in tab-delimited format.  Of course, it is a small dataset easily processed with R:

```{r}
iris <- read.table("~/Dropbox/Data17/iris/iris.tab")
head(iris, n = 5)
```

In a shell, we can use:

```{r, engine='bash'}
head -n 6 ~/Dropbox/Data17/iris/iris.tab
```

Suppose that we only need to select two variables in our model, `Sepal.Length` and `Species`.  In R, we can use:

```{r, eval=FALSE}
iris_subset <- iris[, c("Sepal.Length", "Species")]
```

or

```{r}
iris_subset <- iris[, c(1, 5)]
head(iris_subset)
```

With the tidyverse, we can use *pipes*.  The `%>%` operator allows for performing chained operations.

```{r}
suppressMessages(library(dplyr))

iris %>%
  select(1, 5) %>% 
  head()
```

In a shell, the pipe operator to combine shell commands is `|` and we can use:

```{r, engine='bash'}
cut -f 1,5 ~/Dropbox/Data17/iris/iris.tab | head -n 7
```

To keep observations with "Sepal.Length" greater than 5:

```{r}
iris %>%
  filter(Sepal.Length > 5) %>% 
  head()
```

In the shell, we can use the `AWK` programming language.  We start from row `NR` 2 (we could start from row 1, it contains variable names) and select rows such that the second variable (`Sepal.Length`) is greater than 5.

```{r, engine='bash'}
awk 'NR == 2 || $2 > 5' ~/Dropbox/Data17/iris/iris.tab | head
```

```{exercise}
The iris dataset is also saved in .csv format at `~/Dropbox/Data17/iris/iris.csv`.  Use `AWK` and `tail` to select the last 5 observations where `Sepal.Width` is larger than 3.5 and `Petal.Length` is smaller than 1.5.
```

## Makefiles

## Git and GitHub

Guest lecture by [Ista Zahn](https://www.iq.harvard.edu/people/ista-zahn).

## Buffer

```{r}
ratings <- read.csv("~/Dropbox/data17/ml-latest-small/ratings.csv")
head(ratings)
```
```{r}
links <- read.csv("~/Dropbox/data17/ml-latest-small/links.csv")
head(links)
```

```{r}
movies <- read.csv("~/Dropbox/data17/ml-latest-small/movies.csv")
head(movies)
```
```{r}
tags <- read.csv("~/Dropbox/data17/ml-latest-small/tags.csv")
head(tags)
```

